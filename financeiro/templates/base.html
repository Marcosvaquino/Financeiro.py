<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Financeiro{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="sidebar" id="sidebar">
        <button id="sidebarClose" class="sidebar-close" aria-label="Fechar menu">â€¹</button>
        <h2 class="sidebar-title">Menu</h2>
        <nav class="menu">
            <ul class="menu-root">
                <li class="menu-item has-children">
                    <span class="menu-parent">Financeiro</span>
                    <ul class="menu-children">
                        <li class="child-item"><a href="{{ url_for('planejamento') }}">Painel</a></li>
                        <li class="child-item"><a class="menu-orange" href="{{ url_for('planejamento_frz') }}">Planejamento FRZ</a></li>
                        <li class="child-item"><a href="{{ url_for('projecao') }}">ProjeÃ§Ã£o</a></li>
                        <li class="child-item"><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
                        <li class="child-item"><a href="{{ url_for('resumo') }}">Resumo</a></li>
                        <li class="child-item"><a href="{{ url_for('consolidacao') }}">ConsolidaÃ§Ã£o</a></li>
                        <li class="child-item"><a href="{{ url_for('importacao') }}">ðŸ“‚ ImportaÃ§Ã£o</a></li>
                    </ul>
                </li>
                <li class="menu-item has-children">
                    <span class="menu-parent">Frete</span>
                    <ul class="menu-children">
                        <li class="child-item"><a href="{{ url_for('frete.index') }}">Frete</a></li>
                    </ul>
                </li>
                <li class="menu-item has-children">
                    <span class="menu-parent">Armazem</span>
                    <ul class="menu-children">
                        <li class="child-item"><a href="{{ url_for('armazem.index') }}">Armazem</a></li>
                    </ul>
                </li>
                <li class="menu-item has-children">
                    <span class="menu-parent">Logistica</span>
                    <ul class="menu-children">
                        <li class="child-item"><a href="{{ url_for('logistica.index') }}">Logistica</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>

    <!-- botÃ£o fixo para abrir quando o menu estiver fechado -->
    <button id="sidebarOpen" class="sidebar-open" aria-label="Abrir menu">â€º</button>

    <div class="content">
        {% block content %}{% endblock %}
    </div>
    <script>
        // Simple sidebar toggle: adiciona/removes a classe 'collapsed'
        (function(){
            const btnClose = document.getElementById('sidebarClose');
            const btnOpen = document.getElementById('sidebarOpen');
            const sidebar = document.getElementById('sidebar');
            if(!sidebar) return;

            // helper to hide/show controls
            function setClosed(){
                sidebar.classList.add('collapsed');
                if(btnClose) btnClose.style.display = 'none';
                if(btnOpen) btnOpen.style.display = 'block';
            }
            function setOpen(){
                sidebar.classList.remove('collapsed');
                if(btnClose) btnClose.style.display = 'block';
                if(btnOpen) btnOpen.style.display = 'none';
            }

            // wire up buttons
            if(btnClose){
                btnClose.addEventListener('click', function(e){
                    setClosed();
                    e.stopPropagation();
                });
            }
            if(btnOpen){
                btnOpen.addEventListener('click', function(e){
                    setOpen();
                    e.stopPropagation();
                });
            }

            // initialize based on current class
            if(sidebar.classList.contains('collapsed')){
                if(btnClose) btnClose.style.display = 'none';
                if(btnOpen) btnOpen.style.display = 'block';
            } else {
                if(btnClose) btnClose.style.display = 'block';
                if(btnOpen) btnOpen.style.display = 'none';
            }
        })();
        // Menu pai/filho: alterna submenus ao clicar no item pai
        (function(){
            const parents = document.querySelectorAll('.menu-parent');
            parents.forEach(p => {
                p.addEventListener('click', function(){
                    const item = this.parentElement;
                    item.classList.toggle('expanded');
                });
            });
        })();
    </script>
</body>
</html>
